storage {
    v: int[2][3],
    map_to_arrays: ( int => int[3] ),
}

interface Foo {
    storage {
        v: int[2][3],
        map_to_arrays: ( int => int[3] ),
    }
}

predicate Bar {
    interface FooInstance = Foo(0xEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE);

    state v = storage::v;
    state v1 = storage::v[1];
    state v10 = storage::v[1][0];

    state map_to_arrays_69 = storage::map_to_arrays[69];
    state map_to_arrays_69_1 = storage::map_to_arrays[69][1];

    constraint v' == [
        [42, 43, 44],
        [52, 53, 54],
    ];
    constraint v[1]' == [52, 53, 54];
    constraint v[0][2]' == 44;

    constraint v1' == [52, 53, 54];
    constraint v1[2]' == 54;

    constraint v10' == 52;

    constraint map_to_arrays_69' == [99, 100, 101];
    constraint map_to_arrays_69[2]' == 101;
    constraint map_to_arrays_69_1' == 100;

    state foo_v = FooInstance::storage::v;
    state foo_v1 = FooInstance::storage::v[1];
    state foo_v10 = FooInstance::storage::v[1][0];

    state foo_map_to_arrays_69 = FooInstance::storage::map_to_arrays[69];
    state foo_map_to_arrays_69_1 = FooInstance::storage::map_to_arrays[69][1];

    constraint foo_v' == [
        [142, 143, 144],
        [152, 153, 154],
    ];
    constraint foo_v[1]' == [152, 153, 154];
    constraint foo_v[0][2]' == 144;

    constraint foo_v1' == [152, 153, 154];
    constraint foo_v1[2]' == 154;

    constraint foo_v10' == 152;

    constraint foo_map_to_arrays_69' == [199, 1100, 1101];
    constraint foo_map_to_arrays_69[2]' == 1101;
    constraint foo_map_to_arrays_69_1' == 1100;
}

// parsed <<<
// storage {
//     v: int[3][2],
//     map_to_arrays: ( int => int[3] ),
// }
// interface ::Foo {
//     storage {
//         v: int[3][2],
//         map_to_arrays: ( int => int[3] ),
//     }
// }
//
// predicate ::Bar {
//     storage {
//         v: int[3][2],
//         map_to_arrays: ( int => int[3] ),
//     }
//     interface ::Foo {
//         storage {
//             v: int[3][2],
//             map_to_arrays: ( int => int[3] ),
//         }
//     }
//     interface ::FooInstance = ::Foo(0xEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE)
//     state ::v = storage::v;
//     state ::v1 = storage::v[1];
//     state ::v10 = storage::v[1][0];
//     state ::map_to_arrays_69 = storage::map_to_arrays[69];
//     state ::map_to_arrays_69_1 = storage::map_to_arrays[69][1];
//     state ::foo_v = ::FooInstance::storage::v;
//     state ::foo_v1 = ::FooInstance::storage::v[1];
//     state ::foo_v10 = ::FooInstance::storage::v[1][0];
//     state ::foo_map_to_arrays_69 = ::FooInstance::storage::map_to_arrays[69];
//     state ::foo_map_to_arrays_69_1 = ::FooInstance::storage::map_to_arrays[69][1];
//     constraint (::v' == [[42, 43, 44], [52, 53, 54]]);
//     constraint (::v[1]' == [52, 53, 54]);
//     constraint (::v[0][2]' == 44);
//     constraint (::v1' == [52, 53, 54]);
//     constraint (::v1[2]' == 54);
//     constraint (::v10' == 52);
//     constraint (::map_to_arrays_69' == [99, 100, 101]);
//     constraint (::map_to_arrays_69[2]' == 101);
//     constraint (::map_to_arrays_69_1' == 100);
//     constraint (::foo_v' == [[142, 143, 144], [152, 153, 154]]);
//     constraint (::foo_v[1]' == [152, 153, 154]);
//     constraint (::foo_v[0][2]' == 144);
//     constraint (::foo_v1' == [152, 153, 154]);
//     constraint (::foo_v1[2]' == 154);
//     constraint (::foo_v10' == 152);
//     constraint (::foo_map_to_arrays_69' == [199, 1100, 1101]);
//     constraint (::foo_map_to_arrays_69[2]' == 1101);
//     constraint (::foo_map_to_arrays_69_1' == 1100);
// }
// >>>

// flattened <<<
// storage {
//     v: int[3][2],
//     map_to_arrays: ( int => int[3] ),
// }
// interface ::Foo {
//     storage {
//         v: int[3][2],
//         map_to_arrays: ( int => int[3] ),
//     }
// }
//
// predicate ::Bar {
//     storage {
//         v: int[3][2],
//         map_to_arrays: ( int => int[3] ),
//     }
//     interface ::Foo {
//         storage {
//             v: int[3][2],
//             map_to_arrays: ( int => int[3] ),
//         }
//     }
//     interface ::FooInstance = ::Foo(0xEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE)
//     state ::v: int[3][2] = storage::v;
//     state ::v1: int[3] = storage::v[1];
//     state ::v10: int = storage::v[1][0];
//     state ::map_to_arrays_69: int[3] = storage::map_to_arrays[69];
//     state ::map_to_arrays_69_1: int = storage::map_to_arrays[69][1];
//     state ::foo_v: int[3][2] = ::FooInstance::storage::v;
//     state ::foo_v1: int[3] = ::FooInstance::storage::v[1];
//     state ::foo_v10: int = ::FooInstance::storage::v[1][0];
//     state ::foo_map_to_arrays_69: int[3] = ::FooInstance::storage::map_to_arrays[69];
//     state ::foo_map_to_arrays_69_1: int = ::FooInstance::storage::map_to_arrays[69][1];
//     constraint ((((::v'[0][0] == 42) && (::v'[0][1] == 43)) && (::v'[0][2] == 44)) && (((::v'[1][0] == 52) && (::v'[1][1] == 53)) && (::v'[1][2] == 54)));
//     constraint (((::v'[1][0] == 52) && (::v'[1][1] == 53)) && (::v'[1][2] == 54));
//     constraint (::v'[0][2] == 44);
//     constraint (((::v1'[0] == 52) && (::v1'[1] == 53)) && (::v1'[2] == 54));
//     constraint (::v1'[2] == 54);
//     constraint (::v10' == 52);
//     constraint (((::map_to_arrays_69'[0] == 99) && (::map_to_arrays_69'[1] == 100)) && (::map_to_arrays_69'[2] == 101));
//     constraint (::map_to_arrays_69'[2] == 101);
//     constraint (::map_to_arrays_69_1' == 100);
//     constraint ((((::foo_v'[0][0] == 142) && (::foo_v'[0][1] == 143)) && (::foo_v'[0][2] == 144)) && (((::foo_v'[1][0] == 152) && (::foo_v'[1][1] == 153)) && (::foo_v'[1][2] == 154)));
//     constraint (((::foo_v'[1][0] == 152) && (::foo_v'[1][1] == 153)) && (::foo_v'[1][2] == 154));
//     constraint (::foo_v'[0][2] == 144);
//     constraint (((::foo_v1'[0] == 152) && (::foo_v1'[1] == 153)) && (::foo_v1'[2] == 154));
//     constraint (::foo_v1'[2] == 154);
//     constraint (::foo_v10' == 152);
//     constraint (((::foo_map_to_arrays_69'[0] == 199) && (::foo_map_to_arrays_69'[1] == 1100)) && (::foo_map_to_arrays_69'[2] == 1101));
//     constraint (::foo_map_to_arrays_69'[2] == 1101);
//     constraint (::foo_map_to_arrays_69_1' == 1100);
// }
// >>>
