<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Unions - The Book of Pint</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../the-book-of-pint.html">The Book of Pint</a></li><li class="chapter-item expanded "><a href="../../getting_started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../getting_started/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../../getting_started/quickstart.html"><strong aria-hidden="true">1.2.</strong> Quickstart Guide</a></li></ol></li><li class="chapter-item expanded "><a href="../../examples/index.html"><strong aria-hidden="true">2.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../examples/counter.html"><strong aria-hidden="true">2.1.</strong> Counter</a></li><li class="chapter-item expanded "><a href="../../examples/subcurrency.html"><strong aria-hidden="true">2.2.</strong> Subcurrency</a></li></ol></li><li class="chapter-item expanded "><a href="../../basics/index.html"><strong aria-hidden="true">3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../basics/variables.html"><strong aria-hidden="true">3.1.</strong> Decision Variables</a></li><li class="chapter-item expanded "><a href="../../basics/data_types.html"><strong aria-hidden="true">3.2.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../../basics/comments.html"><strong aria-hidden="true">3.3.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../../basics/conditionals.html"><strong aria-hidden="true">3.4.</strong> Conditionals</a></li><li class="chapter-item expanded "><a href="../../basics/custom_types.html"><strong aria-hidden="true">3.5.</strong> Custom Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../basics/custom_types/type_aliases.html"><strong aria-hidden="true">3.5.1.</strong> Type Aliases</a></li><li class="chapter-item expanded "><a href="../../basics/custom_types/unions.html" class="active"><strong aria-hidden="true">3.5.2.</strong> Unions</a></li><li class="chapter-item expanded "><a href="../../basics/custom_types/match.html"><strong aria-hidden="true">3.5.3.</strong> The match Construct</a></li></ol></li><li class="chapter-item expanded "><a href="../../basics/constraints.html"><strong aria-hidden="true">3.6.</strong> Constraints</a></li><li class="chapter-item expanded "><a href="../../basics/constants.html"><strong aria-hidden="true">3.7.</strong> Constants</a></li></ol></li><li class="chapter-item expanded "><a href="../../smart_contracts/index.html"><strong aria-hidden="true">4.</strong> Pint Smart Contracts</a></li><li class="chapter-item expanded "><a href="../../storage/index.html"><strong aria-hidden="true">5.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../storage/static.html"><strong aria-hidden="true">5.1.</strong> Statically-Sized Storage Types</a></li><li class="chapter-item expanded "><a href="../../storage/dynamic.html"><strong aria-hidden="true">5.2.</strong> Dynamically-Sized Storage Types</a></li><li class="chapter-item expanded "><a href="../../storage/external.html"><strong aria-hidden="true">5.3.</strong> External Storage Access</a></li></ol></li><li class="chapter-item expanded "><a href="../../projects/index.html"><strong aria-hidden="true">6.</strong> Managing Growing Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../projects/packages.html"><strong aria-hidden="true">6.1.</strong> Pint Projects</a></li><li class="chapter-item expanded "><a href="../../projects/modules.html"><strong aria-hidden="true">6.2.</strong> Defining Modules</a></li><li class="chapter-item expanded "><a href="../../projects/paths.html"><strong aria-hidden="true">6.3.</strong> Paths for Referring to an item in a Module Tree</a></li><li class="chapter-item expanded "><a href="../../projects/use.html"><strong aria-hidden="true">6.4.</strong> Bringing Paths into Scope with the use Keyword</a></li></ol></li><li class="chapter-item expanded "><a href="../../advanced/index.html"><strong aria-hidden="true">7.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../advanced/pub_vars.html"><strong aria-hidden="true">7.1.</strong> Public Decision Variables</a></li><li class="chapter-item expanded "><a href="../../advanced/macros.html"><strong aria-hidden="true">7.2.</strong> Macros</a></li></ol></li><li class="chapter-item expanded "><a href="../../pint-reference/index.html"><strong aria-hidden="true">8.</strong> Pint Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../pint-reference/cli.html"><strong aria-hidden="true">8.1.</strong> Commands</a></li><li class="chapter-item expanded "><a href="../../pint-reference/manifest.html"><strong aria-hidden="true">8.2.</strong> Manifest</a></li></ol></li><li class="chapter-item expanded "><a href="../../appendix/index.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../appendix/keywords.html"><strong aria-hidden="true">9.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="../../appendix/intrinsics.html"><strong aria-hidden="true">9.2.</strong> B - Compiler Intrinsics</a></li><li class="chapter-item expanded "><a href="../../appendix/abi.html"><strong aria-hidden="true">9.3.</strong> C - Application Binary Interface (ABI) Spec</a></li><li class="chapter-item expanded "><a href="../../appendix/known_issues.html"><strong aria-hidden="true">9.4.</strong> A - Known Issues and Missing Features</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Book of Pint</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/essential-contributions/pint" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h2 id="unions"><a class="header" href="#unions">Unions</a></h2>
<p>Unions allow you to define a type by enumerating its possible variants. Where structs and tuples
give you a way of grouping together related fields and data, like a <code>User</code> with its <code>status</code>,
<code>address</code>, and <code>balance</code>, unions give you a way of saying a value is one of possible set of values.
For example, we may want to say that <code>User</code> is one of a set of possible account types that also
includes <code>Contract</code>. To do this, Pint allows us to encode these possibilities as a <code>union</code>.</p>
<p>Let’s look at a situation we might want to express in code and see why unions are useful and more
appropriate that structs in this case. Say we need to describe token ownership of one of three
available tokens on an exchange: DAI, USDC, and USDT. Because these are the only tokens we can work
with, we can enumerate them all as different <em>variants</em>:</p>
<pre><code class="language-pint">union Token = DAI | USDC | USDT;
</code></pre>
<p>Note how the possible variants of <code>Token</code> are separated by a <code>|</code>. <code>Token</code> is now a custom data type
that we can use elsewhere in our code. Any <code>Token</code> can now be <code>DAI</code>, <code>USDC</code>, or <code>USDT</code> but never 2
or more of these at the same time. That property of <code>Token</code> makes the union data structure
appropriate because a union variant can only be one of its variants. All three tokens are still
fundamentally <em>tokens</em>, so they should be treated as the same type when the code is handling
situations that apply to any of these tokens.</p>
<h3 id="union-values"><a class="header" href="#union-values">Union Values</a></h3>
<p>We can now create an instance of each of the three variants of <code>Token</code> like this:</p>
<pre><code class="language-pint">var dai: Token = Token::DAI;
var usdc: Token = Token::USDC;
var usdt: Token = Token::USDT;
</code></pre>
<p>Note that the variants of the union are namespaced under its identifier, and we use a double colon
to separate the two. This is useful because now all three values <code>Token::DAI</code>, <code>Token::USDC</code>, and
<code>Token::USDT</code> are of the same type: <code>Token</code>. We can then, for instance, declare a variable called
<code>token_type</code> to be of type <code>Token</code> and assign it to either variants depending some token ID:</p>
<pre><code class="language-pint">var token_id: int;
var token_type: Token = cond {
    token_id == 0 =&gt; Token::DAI,
    token_id == 1  =&gt; Token::USDC,
    else =&gt; Token::USDT,
};
</code></pre>
<p>Using unions has even more advantages. Thinking more about our <code>Token</code> type, at the moment we don’t
have a way to store the actual token amount; we only know what kind it is. Given what you know about
structs and tuples, you might be tempted to tackle this problem with structs as follows:</p>
<pre><code class="language-pint">type Balance = {
    token: Token,
    balance: int,
};

predicate balances_1 {
    var alice_bal: Balance = {
        token: Token::DAI,
        balance: 42,
    };

    var bob_bal: Balance = {
        token: Token::USDC,
        balance: 96,
    };
}
</code></pre>
<p>Here, we've defined a new type called <code>Balance</code> that has two fields: a <code>token</code> field that is of type
<code>Token</code> (the union we defined previously) and a <code>balance</code> field of type <code>int</code> that represents the
balance. We have two instances of this type. The first is <code>alice_bal</code>, and it has the value
<code>Token::DAI</code> as its <code>token</code> with associated <code>balance</code> of <code>42</code>. The second instance is <code>bob_bal</code>. It
has another variant of <code>Token</code> as its <code>kind</code> value, <code>Token::USDC</code>, and has a <code>balance</code> of <code>96</code>
associated with it. We've used a struct to bundle the <code>token</code> and <code>balance</code> values together, so now
the variant is associated with the value.</p>
<p>However, representing the same concept using just a union is more concise: rather than a union
inside a struct, we can put data directly into each union variant. This new definition of the
<code>Token</code> union says that the variants <code>DAI</code>, <code>USDC</code>, and <code>USDT</code> will have associated <code>int</code> values:</p>
<pre><code class="language-pint">union TokenBalance = DAI(int) | USDC(int) | USDT(int);

predicate balances_2 {
    var alice_bal: TokenBalance = TokenBalance::DAI(42);
    var bob_bal: TokenBalance = TokenBalance::USDC(96);
}
</code></pre>
<p>We attach data to each variant of the union directly, so there is no need for an extra struct. Also
notice the syntax for constructing an instance of the union where the value held by a variant is
added between parentheses after the variant name.</p>
<p>There's another advantage to using a union rather than a struct: each variant can have different
types and amounts of associated data. Let's look at another example of a union that has a wide
variety of types embedded in its variants:</p>
<pre><code class="language-pint">union Action =   Quit                                // Quit the application
               | Buy (TokenBalance)                  // Buy some amount of a token
               | Sell({TokenBalance, price: int})    // sell some amount of a token at some price
               | Swap({TokenBalance, TokenBalance}); // Swap some amount of a token for another amount of some other token
</code></pre>
<p>This union has four variants with different types:</p>
<ul>
<li><code>Quit</code> has no data associated with it at all.</li>
<li><code>Buy</code> includes a <code>TokenBalance</code>.</li>
<li><code>Sell</code> and <code>Swap</code> includes tuples.</li>
</ul>
<p>Defining a union with variants such as the ones above is similar to defining different kinds of
struct definitions, except the union variants are grouped together under the <code>Action</code> type which
makes it easier to reason about them as part of a single type.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../basics/custom_types/type_aliases.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../basics/custom_types/match.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../basics/custom_types/type_aliases.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../basics/custom_types/match.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pint.js"></script>
        <script src="../../theme/bnf.js"></script>


    </div>
    </body>
</html>
