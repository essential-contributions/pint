<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Public Decision Variables - The Book of Pint</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../the-book-of-pint.html">The Book of Pint</a></li><li class="chapter-item expanded "><a href="../getting_started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting_started/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting_started/quickstart.html"><strong aria-hidden="true">1.2.</strong> Quickstart Guide</a></li></ol></li><li class="chapter-item expanded "><a href="../examples/index.html"><strong aria-hidden="true">2.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../examples/counter.html"><strong aria-hidden="true">2.1.</strong> Counter</a></li><li class="chapter-item expanded "><a href="../examples/subcurrency.html"><strong aria-hidden="true">2.2.</strong> Subcurrency</a></li></ol></li><li class="chapter-item expanded "><a href="../basics/index.html"><strong aria-hidden="true">3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basics/variables.html"><strong aria-hidden="true">3.1.</strong> Decision Variables</a></li><li class="chapter-item expanded "><a href="../basics/data_types.html"><strong aria-hidden="true">3.2.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../basics/comments.html"><strong aria-hidden="true">3.3.</strong> Comments</a></li><li class="chapter-item expanded "><a href="../basics/conditionals.html"><strong aria-hidden="true">3.4.</strong> Conditionals</a></li><li class="chapter-item expanded "><a href="../basics/custom_types.html"><strong aria-hidden="true">3.5.</strong> Custom Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basics/custom_types/type_aliases.html"><strong aria-hidden="true">3.5.1.</strong> Type Aliases</a></li><li class="chapter-item expanded "><a href="../basics/custom_types/unions.html"><strong aria-hidden="true">3.5.2.</strong> Unions</a></li><li class="chapter-item expanded "><a href="../basics/custom_types/match.html"><strong aria-hidden="true">3.5.3.</strong> The match Construct</a></li></ol></li><li class="chapter-item expanded "><a href="../basics/constraints.html"><strong aria-hidden="true">3.6.</strong> Constraints</a></li><li class="chapter-item expanded "><a href="../basics/constants.html"><strong aria-hidden="true">3.7.</strong> Constants</a></li></ol></li><li class="chapter-item expanded "><a href="../smart_contracts/index.html"><strong aria-hidden="true">4.</strong> Pint Smart Contracts</a></li><li class="chapter-item expanded "><a href="../storage/index.html"><strong aria-hidden="true">5.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../storage/static.html"><strong aria-hidden="true">5.1.</strong> Statically-Sized Storage Types</a></li><li class="chapter-item expanded "><a href="../storage/dynamic.html"><strong aria-hidden="true">5.2.</strong> Dynamically-Sized Storage Types</a></li><li class="chapter-item expanded "><a href="../storage/external.html"><strong aria-hidden="true">5.3.</strong> External Storage Access</a></li></ol></li><li class="chapter-item expanded "><a href="../projects/index.html"><strong aria-hidden="true">6.</strong> Managing Growing Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../projects/packages.html"><strong aria-hidden="true">6.1.</strong> Pint Projects</a></li><li class="chapter-item expanded "><a href="../projects/modules.html"><strong aria-hidden="true">6.2.</strong> Defining Modules</a></li><li class="chapter-item expanded "><a href="../projects/paths.html"><strong aria-hidden="true">6.3.</strong> Paths for Referring to an item in a Module Tree</a></li><li class="chapter-item expanded "><a href="../projects/use.html"><strong aria-hidden="true">6.4.</strong> Bringing Paths into Scope with the use Keyword</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced/index.html"><strong aria-hidden="true">7.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced/pub_vars.html" class="active"><strong aria-hidden="true">7.1.</strong> Public Decision Variables</a></li><li class="chapter-item expanded "><a href="../advanced/macros.html"><strong aria-hidden="true">7.2.</strong> Macros</a></li></ol></li><li class="chapter-item expanded "><a href="../pint-reference/index.html"><strong aria-hidden="true">8.</strong> Pint Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pint-reference/cli.html"><strong aria-hidden="true">8.1.</strong> Commands</a></li><li class="chapter-item expanded "><a href="../pint-reference/manifest.html"><strong aria-hidden="true">8.2.</strong> Manifest</a></li></ol></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/keywords.html"><strong aria-hidden="true">9.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="../appendix/intrinsics.html"><strong aria-hidden="true">9.2.</strong> B - Compiler Intrinsics</a></li><li class="chapter-item expanded "><a href="../appendix/abi.html"><strong aria-hidden="true">9.3.</strong> C - Application Binary Interface (ABI) Spec</a></li><li class="chapter-item expanded "><a href="../appendix/known_issues.html"><strong aria-hidden="true">9.4.</strong> A - Known Issues and Missing Features</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Book of Pint</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/essential-contributions/pint" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h2 id="public-decision-variables"><a class="header" href="#public-decision-variables">Public Decision Variables</a></h2>
<p>By default, all decision variables are private. That is, they are only accessible from within the
predicate that declares them. There is no way to reason about the value of a private decision
variable from <em>outside</em> the predicate. This, however, may not be sufficient to build certain
applications. It also imposes limitations on how contracts are written: if a predicate requires data
from another predicate, then the two predicates must be combined.</p>
<p>We've already looked at one class of variables that are always public: <strong>storage variables</strong>. While
storage variables allow us to share data between predicates, they are the wrong tool for our use
case because they are persistent. What we want is a class of variables that can be shared between
predicates but that are <em>temporary</em>. That is, their value should no longer be relevant after a
solution is submitted and validated. Pint solves this problem by allow decision variables to be
<strong>public</strong> via the <code>pub</code> keyword.</p>
<h3 id="declaring-public-decision-variables"><a class="header" href="#declaring-public-decision-variables">Declaring Public Decision Variables</a></h3>
<p>Declaring public decision variables is fairly simple. All you have to do is prefix the <code>var</code>
declaration with the keyword <code>pub</code>:</p>
<pre><code class="language-pint">predicate Foo(a: int, b: bool, c: int[4]) {
    pub var x: int;
    pub var y: b256;
    pub var t: { int, bool, b256 };

    constraint a + x &gt; 3;
    constraint y == 0x1111111111111111111111111111111111111111111111111111111111111111;
    constraint !t.1 &amp;&amp; b;
}
</code></pre>
<p>In the predicate above, we are declaring 3 public decision variables and 3 private decision
variables.</p>
<p>Accessing public decision variables within the predicate that defines them is no different from
accessing private decision variables. The example above also declares 3 constraints that access both
types of decision variables in various ways.</p>
<h3 id="public-decision-variables-in-interfaces"><a class="header" href="#public-decision-variables-in-interfaces">Public Decision Variables in Interfaces</a></h3>
<p>Recall that for each contract, an interface can be produced that exposes all public elements of a
contract: the storage block as well as all the predicates and their public decision variables. For
example, the following interface can be produced from the contract above:</p>
<pre><code class="language-pint">interface MyInterface {
    // storage block, if present

    predicate Foo {
        pub var x: int;
        pub var y: b256;
        pub var t: { int, bool, b256 };
    }

    // other predicates, if present
}
</code></pre>
<p>Note that everything in predicate <code>Foo</code> was dropped except for <code>pub var</code> declarations.</p>
<p>Next, we will show how to use an interface to access public decision variables of an external
predicate.</p>
<h3 id="external-access-to-public-decision-variables"><a class="header" href="#external-access-to-public-decision-variables">External Access to Public Decision Variables</a></h3>
<p>In <a href="../storage/external.html">Chapter 5.3</a> we covered how to use interfaces to access storage
variables from an external context. Accessing public decision variables from an external context
requires similar steps.</p>
<p>First, we need to declare an interface instance using the syntax we learned in <a href="../storage/external.html">Chapter
5.3</a></p>
<pre><code class="language-pint">    interface MyInterfaceInstance = MyInterface(ContractID);
</code></pre>
<p>where <code>ContractID</code> is the address of the contract where the public decision variables are declared.
Then, and because the public decision variables live inside a predicate, we need to declare a
<strong>predicate instance</strong> as follows:</p>
<pre><code class="language-pint">    predicate FooInstance = MyInterfaceInstance::Foo(PredicateID);
</code></pre>
<p>Similarly to interface instance declarations, a predicate instance declaration requires an address.
Each predicate has a 256-bit address that identifies it on the blockchain. The above declares an
interface instance called <code>FooInstance</code> of predicate <code>Foo</code> and with address <code>PredicateID</code>. Note that
we refer to the predicate <code>Foo</code> in the declaration using the interface instance name followed by
<code>::Foo</code>.</p>
<p>Now that we have an instance of <code>Foo</code>, we are able to access its public decision variables using a
path that contains the predicate instance name and the name of the variable:</p>
<pre><code class="language-pint">    constraint m * FooInstance::x &gt; 8;
    constraint FooInstance::y == 0x2222222222222222222222222222222222222222222222222222222222222222;
    constraint FooInstance::t.1 &amp;&amp; n;
</code></pre>
<h3 id="public-decision-variables-in-solutions"><a class="header" href="#public-decision-variables-in-solutions">Public Decision Variables in Solutions</a></h3>
<p>Sharing data between two predicates using public decision variables only makes sense if the solution
that we are trying to validate actually solves both predicates. For example, if predicate <code>Foo</code>
exposes <code>pub var x;</code> and predicate <code>Bar</code> uses <code>x</code>, then a solution that solves <code>Bar</code> must also solve
<code>Foo</code> since <code>Bar</code> requires data from <code>Foo</code>, namely <code>x</code>.</p>
<p>Every solution contains a list of the predicates it solves. Some predicates might even be solved
multiple times in the same solution! This may be surprising to you but you can imagine multiple
instances of the same predicate being solved with different values. After all, predicates can
generally be solved in many different ways depending on how restrictive their constraints are.</p>
<p>As a result, each predicate instance declaration must somehow specify which part of the solution it
is referring to. The Pint compiler accomplishes this by adding an <em>implicit</em> decision variable that
represents the <strong>index</strong> of the solved predicate in the solution. An implicit decision variable is
added for each predicate instance declaration. Therefore, in the example below:</p>
<pre><code class="language-pint">    interface MyInterfaceInstance = MyInterface(ContractID);
    predicate FooInstance1 = MyInterfaceInstance::Foo(PredicateID);
    predicate FooInstance2 = MyInterfaceInstance::Foo(PredicateID);
    
    let x1 = FooInstance1::x;
    let x2 = FooInstance2::x;
</code></pre>
<p>the variables <code>x1</code> and <code>x2</code> may not be the same since they may refer to two different values of <code>x</code>
in the solution (if <code>Foo</code> is solved multiple times).</p>
<h3 id="accessing-public-decision-variables-from-a-sibling-contract"><a class="header" href="#accessing-public-decision-variables-from-a-sibling-contract">Accessing Public Decision Variables From a Sibling Contract</a></h3>
<p>Public decision variables, being <em>public</em>, are also visible from predicates in the <em>same</em> contract
as the predicate that declares them. While working within a single contract, you may want one
predicate to access another predicate's public decision variables. This can be done, again, using
predicate instances. The difference here is that, because we're working in the same contract, there
is no need to declare an interface for that contract and an interface instance. There is also no
need to specify an address for the predicate instance because the compiler can figure that out on
its own! Here's an example:</p>
<pre><code class="language-pint">predicate A() {
    pub var x: int;    
}

predicate B() {
    predicate AI1 = A();
    predicate AI2 = A();
    constraint AI1::x == AI2::x * 2;
}
</code></pre>
<p>Here, <code>AI1</code> and <code>AI2</code> are two instances of predicate <code>A</code> which exposes a single public decision
variable called <code>x</code>. We are then requiring that the value of <code>x</code> in the first instance is double the
value of <code>x</code> in the second instance.</p>
<p>One important caveat of the above is that you are not allowed to have <em>cyclical dependencies</em>
between predicates. For example:</p>
<pre><code class="language-pint">predicate A() {
    pub var x: int;    

    predicate BI = B();
    constraint BI::y == 69;
}

predicate B() {
    pub var y: int;    

    predicate AI = A();
    constraint AI::x == 42;
}
</code></pre>
<p>Here, predicate <code>A</code> requires predicate <code>B</code> and predicate <code>B</code> requires predicate <code>A</code>. This causes a
cycle where the addresses of a predicate cannot be determined and used by the other. The compiler
will emit the following error to prevent you from proceeding:</p>
<pre><code class="language-console">Error: dependency cycle detected between predicates
   ╭─[ch_7_1_b.pnt:3:1]
   │
 3 │ predicate A {
   │ ─────┬─────
   │      ╰─────── this predicate is on the dependency cycle
   │
10 │ predicate B {
   │ ─────┬─────
   │      ╰─────── this predicate is on the dependency cycle
   │
   │ Note: dependency between predicates is typically created via predicate instances
───╯
</code></pre>
<p>Another caveat is that a predicate cannot reference itself:</p>
<pre><code class="language-pint">predicate C() {
    pub var x: int;    

    predicate CI = C();
    constraint CI::x == 69;
}
</code></pre>
<p>The compiler will complain as follows:</p>
<pre><code class="language-console">Error: self referential predicate `C`
   ╭─[ch_7_1_c.pnt:6:5]
   │
 6 │     predicate CI = C();
   │     ─────────┬────────
   │              ╰────────── this predicate instance references the predicate it's declared in
───╯
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../advanced/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../advanced/macros.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../advanced/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../advanced/macros.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/pint.js"></script>
        <script src="../theme/bnf.js"></script>


    </div>
    </body>
</html>
